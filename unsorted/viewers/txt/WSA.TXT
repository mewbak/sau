Файл графики .WSA состоит из заголовка и набора листов изображения.Листы предс-
тавляют собой спрайты блочной структуры, дополнительно сжатые блочным методом,
также используемым для CPS-файлов.Состоят, естественно, из блоков.
Заголовок файла устроен так:
+0 DW максимальный номер листа
+2 DD неизвестно что;
      ВНИМАНИЕ: этого поля может не быть!!!
+6 DW число столбцов в спрайте
+8 DW число строк в спрайте
+A DW размер буфера для распаковки спрайта
+С DW 1 если есть встроенная палитра, 0 если нет;
      ВНИМАНИЕ: этого поля тоже может не быть!!!
+E DD для каждого спрайта его смещение в файле; после всех смещений длина файла
+? ... тело файла
   ВНИМАНИЕ: также возможен вариант:
+0 DW максимальный номер листа
+2 DW число столбцов в спрайте
+4 DW число строк в спрайте
+6 DW размер буфера для распаковки 1-го спрайта
+8 DD смещение в файле для 1-го спрайта
+A ... так же для всех спрайтов
+? ... тело файла
При наличии встроенной палитры, в [+E] находится ее смещение; в этом случае к
[+E] следует прибавить 300h, чтобы получить смещение первого листа. Также в
[+E] может сидеть DD 0, который надо пропустить.
Блоки листов устроены так же, как и в .CPS:
концевик:
+0 DB 80h , на нем вывод изображения прекращается
блок длинного повторенного копирования:
+0 DB 0FFh
+1 DW счетчик
+3 DW смещение источника в видеопамяти
блок заполнения:
+0 DB 0FEh
+1 DW счетчик
+3 DB цвет
блок среднего повторенного копирования:
+0 DB 11xxxxxx
+1 DW смещение источника в видеопамяти , по нему копируются (xxxxxx+3) точек
блок копирования:
+0 DB 10xxxxxx
+1 DB (xxxxxx) байт изображения, по нему они копируются на экран
блок короткого повторенного копирования:
+0 DB 0xxxyyyy
+1 DB 0ZTh , по нему (xxx+3) точек копируются из ($-0YZTh)
            ( $-текущее смещение, Y=yyyy)
Спрайты выводятся операцией XOR. Блоки спрайтов устроены так:
блок короткого заполнения:
+0 DB 0
+1 DB счетчик
+2 DB цвет
блок короткого копирования:
+0 DB 0xxxxxxx
+1 DB (xxxxxxx) байт изображения
блок короткого пропуска:
+0 DB 1xxxxxxx , по нему пропускаются (будут прозрачными) (xxxxxxx) точек
блок длинного заполнения:
+0 DB 80h
+1 DW 11xxxxxxxxxxxxxx
+3 DB цвет , по нему заполняются (xxxxxxxxxxxxx) точек
блок длинного копирования:
+0 DB 80h
+1 DW 10xxxxxxxxxxxxxx
+3 DB (xxxxxxxxxxxxx) байт изображения
блок длинного пропуска:
+0 DB 80h
+1 DW 0xxxxxxxxxxxxxxx , по нему пропускаются (xxxxxxxxxxxxxxx) точек
концевик:
+0 DB 80h
+1 DW 0 , на нем вывод изображения прекращается.

Вот,собственно,и все...