//Credits go to SNV

#include "common.h"


// the game executables (*.prg files) are ms exepack compressed
// see doc/dos/exepack.c


// color-cycling ranges:
//193-199
//209-212
//220-223
static u1 BeachPal[] = {
 0x00, 0x00, 0x34, 0x38, 0x30, 0x28, 0x38, 0x28,
 0x18, 0x30, 0x20, 0x10, 0x28, 0x18, 0x00, 0x20,
 0x10, 0x00, 0x28, 0x10, 0x00, 0x30, 0x18, 0x08,
 0x38, 0x30, 0x18, 0x38, 0x28, 0x00, 0x38, 0x28,
 0x18, 0x10, 0x20, 0x20, 0x08, 0x18, 0x18, 0x00,
 0x10, 0x10, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x18, 0x20, 0x18, 0x38, 0x20, 0x00, 0x30, 0x18,
 0x00, 0x28, 0x10, 0x00, 0x08, 0x18, 0x30, 0x00,
 0x10, 0x28, 0x00, 0x08, 0x20, 0x00, 0x30, 0x38,
 0x08, 0x20, 0x38, 0x20, 0x20, 0x20, 0x28, 0x28,
 0x28, 0x38, 0x30, 0x00, 0x38, 0x00, 0x00, 0x20,
 0x00, 0x00, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x18, 0x20, 0x18, 0x38, 0x20, 0x00, 0x30, 0x18,
 0x00, 0x28, 0x10, 0x00, 0x08, 0x18, 0x30, 0x00,
 0x10, 0x28, 0x00, 0x08, 0x20, 0x00, 0x30, 0x38,
 0x08, 0x20, 0x3C, 0x19, 0x19, 0x19, 0x28, 0x28,
 0x28, 0x38, 0x30, 0x00, 0x38, 0x00, 0x00, 0x20,
 0x00, 0x00, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x3F, 0x3F, 0x3F, 0x3B, 0x3B, 0x3B, 0x37, 0x37,
 0x37, 0x32, 0x32, 0x32, 0x2E, 0x2E, 0x2E, 0x2A,
 0x2A, 0x2A, 0x26, 0x26, 0x26, 0x22, 0x22, 0x22,
 0x1D, 0x1D, 0x1D, 0x19, 0x19, 0x19, 0x15, 0x15,
 0x15, 0x11, 0x11, 0x11, 0x0D, 0x0D, 0x0D, 0x08,
 0x08, 0x08, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00,
 0x20, 0x20, 0x18, 0x3F, 0x00, 0x3F, 0x2D, 0x00,
 0x2D, 0x24, 0x00, 0x24, 0x00, 0x30, 0x38, 0x00,
 0x20, 0x38, 0x18, 0x18, 0x10, 0x3C, 0x00, 0x3C,
 0x3C, 0x00, 0x3C, 0x38, 0x30, 0x38, 0x38, 0x00,
 0x00, 0x38, 0x20, 0x00, 0x38, 0x18, 0x00, 0x28,
 0x10, 0x00, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x3F, 0x20, 0x20, 0x3F, 0x00, 0x00, 0x39, 0x00,
 0x00, 0x33, 0x00, 0x00, 0x2D, 0x00, 0x00, 0x26,
 0x00, 0x00, 0x20, 0x00, 0x00, 0x1A, 0x00, 0x00,
 0x14, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x38, 0x00,
 0x00, 0x30, 0x00, 0x00, 0x29, 0x00, 0x00, 0x22,
 0x00, 0x00, 0x1A, 0x00, 0x00, 0x13, 0x00, 0x00,
 0x3F, 0x14, 0x14, 0x39, 0x36, 0x0F, 0x36, 0x2F,
 0x07, 0x34, 0x2B, 0x06, 0x32, 0x27, 0x06, 0x30,
 0x22, 0x05, 0x2E, 0x1E, 0x04, 0x2C, 0x1A, 0x04,
 0x2A, 0x15, 0x03, 0x28, 0x11, 0x02, 0x26, 0x0D,
 0x02, 0x24, 0x08, 0x01, 0x22, 0x04, 0x00, 0x20,
 0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x28, 0x38, 0x30, 0x18, 0x38, 0x18, 0x00, 0x30,
 0x00, 0x00, 0x20, 0x00, 0x00, 0x18, 0x00, 0x08,
 0x10, 0x08, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x30, 0x25, 0x20, 0x3C, 0x03, 0x28,
 0x38, 0x20, 0x30, 0x38, 0x00, 0x20, 0x3C, 0x00,
 0x18, 0x38, 0x00, 0x08, 0x34, 0x00, 0x08, 0x28,
 0x28, 0x38, 0x30, 0x18, 0x38, 0x18, 0x00, 0x30,
 0x00, 0x00, 0x20, 0x00, 0x00, 0x18, 0x00, 0x08,
 0x10, 0x08, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x34, 0x00, 0x00, 0x3F, 0x00, 0x00,
 0x34, 0x00, 0x00, 0x3F, 0x00, 0x18, 0x3F, 0x20,
 0x10, 0x00, 0x38, 0x38, 0x38, 0x38, 0x30, 0x28,
 0x38, 0x28, 0x18, 0x30, 0x20, 0x10, 0x30, 0x20,
 0x10, 0x00, 0x00, 0x00, 0x08, 0x08, 0x2C, 0x00,
 0x18, 0x3C, 0x00, 0x24, 0x3C, 0x10, 0x34, 0x3C,
 0x00, 0x00, 0x10, 0x0F, 0x10, 0x20, 0x18, 0x1B,
 0x27, 0x22, 0x26, 0x2E, 0x2B, 0x31, 0x35, 0x34,
 0x3F, 0x3F, 0x34, 0x38, 0x3C, 0x00, 0x08, 0x20,
 0x00, 0x18, 0x20, 0x00, 0x28, 0x20, 0x24, 0x3C,
 0x3C, 0x00, 0x34, 0x34, 0x08, 0x10, 0x24, 0x00,
 0x08, 0x18, 0x00, 0x00, 0x16, 0x00, 0x00, 0x00,
 0x00, 0x3F, 0x00, 0x04, 0x3F, 0x04, 0x08, 0x3F,
 0x08, 0x0D, 0x3F, 0x0D, 0x11, 0x3F, 0x11, 0x15,
 0x3F, 0x15, 0x19, 0x3F, 0x19, 0x1D, 0x3F, 0x1D,
 0x22, 0x3F, 0x22, 0x26, 0x3F, 0x26, 0x2A, 0x3F,
 0x2A, 0x2E, 0x3F, 0x2E, 0x32, 0x3F, 0x32, 0x37,
 0x3F, 0x37, 0x3B, 0x3F, 0x3B, 0x3F, 0x3F, 0x3F};


static u1 GrassPal[] = {
 0x00, 0x00, 0x3C, 0x38, 0x34, 0x08, 0x3C, 0x00,
 0x00, 0x38, 0x20, 0x08, 0x30, 0x18, 0x00, 0x28,
 0x10, 0x00, 0x20, 0x08, 0x00, 0x08, 0x28, 0x30,
 0x28, 0x30, 0x08, 0x18, 0x28, 0x08, 0x38, 0x38,
 0x38, 0x10, 0x20, 0x00, 0x18, 0x18, 0x20, 0x28,
 0x28, 0x30, 0x08, 0x10, 0x10, 0x00, 0x00, 0x00,
 0x18, 0x20, 0x18, 0x38, 0x20, 0x00, 0x30, 0x18,
 0x00, 0x28, 0x10, 0x00, 0x08, 0x18, 0x30, 0x00,
 0x10, 0x28, 0x00, 0x08, 0x20, 0x00, 0x30, 0x38,
 0x08, 0x20, 0x38, 0x20, 0x20, 0x20, 0x28, 0x28,
 0x28, 0x38, 0x30, 0x00, 0x38, 0x00, 0x00, 0x20,
 0x00, 0x00, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x18, 0x20, 0x18, 0x38, 0x20, 0x00, 0x30, 0x18,
 0x00, 0x28, 0x10, 0x00, 0x08, 0x18, 0x30, 0x00,
 0x10, 0x28, 0x00, 0x08, 0x20, 0x00, 0x30, 0x38,
 0x08, 0x20, 0x3C, 0x19, 0x19, 0x19, 0x28, 0x28,
 0x28, 0x38, 0x30, 0x00, 0x38, 0x00, 0x00, 0x20,
 0x00, 0x00, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x3F, 0x3F, 0x3F, 0x3B, 0x3B, 0x3B, 0x37, 0x37,
 0x37, 0x32, 0x32, 0x32, 0x2E, 0x2E, 0x2E, 0x2A,
 0x2A, 0x2A, 0x26, 0x26, 0x26, 0x22, 0x22, 0x22,
 0x1D, 0x1D, 0x1D, 0x19, 0x19, 0x19, 0x15, 0x15,
 0x15, 0x11, 0x11, 0x11, 0x0D, 0x0D, 0x0D, 0x08,
 0x08, 0x08, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00,
 0x20, 0x20, 0x18, 0x3F, 0x00, 0x3F, 0x2D, 0x00,
 0x2D, 0x24, 0x00, 0x24, 0x00, 0x30, 0x38, 0x00,
 0x20, 0x38, 0x18, 0x18, 0x10, 0x3C, 0x00, 0x3C,
 0x3C, 0x00, 0x3C, 0x38, 0x30, 0x38, 0x38, 0x00,
 0x00, 0x38, 0x20, 0x00, 0x38, 0x18, 0x00, 0x28,
 0x10, 0x00, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x3F, 0x20, 0x20, 0x3F, 0x00, 0x00, 0x39, 0x00,
 0x00, 0x33, 0x00, 0x00, 0x2D, 0x00, 0x00, 0x26,
 0x00, 0x00, 0x20, 0x00, 0x00, 0x1A, 0x00, 0x00,
 0x14, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x38, 0x00,
 0x00, 0x30, 0x00, 0x00, 0x29, 0x00, 0x00, 0x22,
 0x00, 0x00, 0x1A, 0x00, 0x00, 0x13, 0x00, 0x00,
 0x3F, 0x14, 0x14, 0x39, 0x36, 0x0F, 0x36, 0x2F,
 0x07, 0x34, 0x2B, 0x06, 0x32, 0x27, 0x06, 0x30,
 0x22, 0x05, 0x2E, 0x1E, 0x04, 0x2C, 0x1A, 0x04,
 0x2A, 0x15, 0x03, 0x28, 0x11, 0x02, 0x26, 0x0D,
 0x02, 0x24, 0x08, 0x01, 0x22, 0x04, 0x00, 0x20,
 0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x28, 0x38, 0x30, 0x18, 0x38, 0x18, 0x00, 0x30,
 0x00, 0x00, 0x20, 0x00, 0x00, 0x18, 0x00, 0x08,
 0x10, 0x08, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x18, 0x20, 0x18, 0x38, 0x28, 0x28, 0x30, 0x20,
 0x20, 0x28, 0x18, 0x18, 0x08, 0x18, 0x28, 0x00,
 0x10, 0x20, 0x00, 0x08, 0x18, 0x00, 0x30, 0x30,
 0x08, 0x20, 0x32, 0x20, 0x20, 0x20, 0x28, 0x28,
 0x28, 0x3F, 0x35, 0x2A, 0x20, 0x18, 0x18, 0x18,
 0x10, 0x10, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x10, 0x0F, 0x10, 0x20, 0x18, 0x1B,
 0x27, 0x22, 0x26, 0x2E, 0x2B, 0x31, 0x35, 0x34,
 0x3F, 0x3F, 0x34, 0x38, 0x3C, 0x00, 0x08, 0x20,
 0x00, 0x18, 0x20, 0x00, 0x28, 0x20, 0x24, 0x3C,
 0x3C, 0x00, 0x34, 0x34, 0x08, 0x10, 0x24, 0x00,
 0x08, 0x18, 0x00, 0x00, 0x16, 0x00, 0x00, 0x00,
 0x00, 0x3F, 0x00, 0x04, 0x3F, 0x04, 0x08, 0x3F,
 0x08, 0x0D, 0x3F, 0x0D, 0x11, 0x3F, 0x11, 0x15,
 0x3F, 0x15, 0x19, 0x3F, 0x19, 0x1D, 0x3F, 0x1D,
 0x22, 0x3F, 0x22, 0x26, 0x3F, 0x26, 0x2A, 0x3F,
 0x2A, 0x2E, 0x3F, 0x2E, 0x32, 0x3F, 0x32, 0x37,
 0x3F, 0x37, 0x3B, 0x3F, 0x3B, 0x3F, 0x3F, 0x3F};


static u1 SnowPal[] = {
 0x00, 0x00, 0x10, 0x0F, 0x10, 0x20, 0x18, 0x1B,
 0x27, 0x22, 0x26, 0x2E, 0x2B, 0x31, 0x35, 0x34,
 0x3F, 0x3F, 0x34, 0x38, 0x3C, 0x18, 0x08, 0x00,
 0x2C, 0x10, 0x00, 0x34, 0x18, 0x00, 0x24, 0x3C,
 0x3C, 0x00, 0x34, 0x34, 0x08, 0x10, 0x24, 0x00,
 0x08, 0x18, 0x3C, 0x24, 0x00, 0x00, 0x00, 0x00,
 0x18, 0x20, 0x18, 0x38, 0x20, 0x00, 0x30, 0x18,
 0x00, 0x28, 0x10, 0x00, 0x08, 0x18, 0x30, 0x00,
 0x10, 0x28, 0x00, 0x08, 0x20, 0x00, 0x30, 0x38,
 0x08, 0x20, 0x38, 0x20, 0x20, 0x20, 0x28, 0x28,
 0x28, 0x38, 0x30, 0x00, 0x38, 0x00, 0x00, 0x20,
 0x00, 0x00, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x18, 0x20, 0x18, 0x38, 0x20, 0x00, 0x30, 0x18,
 0x00, 0x28, 0x10, 0x00, 0x08, 0x18, 0x30, 0x00,
 0x10, 0x28, 0x00, 0x08, 0x20, 0x00, 0x30, 0x38,
 0x08, 0x20, 0x3C, 0x19, 0x19, 0x19, 0x28, 0x28,
 0x28, 0x38, 0x30, 0x00, 0x38, 0x00, 0x00, 0x20,
 0x00, 0x00, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x3F, 0x3F, 0x3F, 0x3B, 0x3B, 0x3B, 0x37, 0x37,
 0x37, 0x32, 0x32, 0x32, 0x2E, 0x2E, 0x2E, 0x2A,
 0x2A, 0x2A, 0x26, 0x26, 0x26, 0x22, 0x22, 0x22,
 0x1D, 0x1D, 0x1D, 0x19, 0x19, 0x19, 0x15, 0x15,
 0x15, 0x11, 0x11, 0x11, 0x0D, 0x0D, 0x0D, 0x08,
 0x08, 0x08, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00,
 0x20, 0x20, 0x18, 0x3F, 0x00, 0x3F, 0x2D, 0x00,
 0x2D, 0x24, 0x00, 0x24, 0x00, 0x30, 0x38, 0x00,
 0x20, 0x38, 0x18, 0x18, 0x10, 0x3C, 0x00, 0x3C,
 0x3C, 0x00, 0x3C, 0x38, 0x30, 0x38, 0x38, 0x00,
 0x00, 0x38, 0x20, 0x00, 0x38, 0x18, 0x00, 0x28,
 0x10, 0x00, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x3F, 0x20, 0x20, 0x3F, 0x00, 0x00, 0x39, 0x00,
 0x00, 0x33, 0x00, 0x00, 0x2D, 0x00, 0x00, 0x26,
 0x00, 0x00, 0x20, 0x00, 0x00, 0x1A, 0x00, 0x00,
 0x14, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x38, 0x00,
 0x00, 0x30, 0x00, 0x00, 0x29, 0x00, 0x00, 0x22,
 0x00, 0x00, 0x1A, 0x00, 0x00, 0x13, 0x00, 0x00,
 0x3F, 0x14, 0x14, 0x39, 0x36, 0x0F, 0x36, 0x2F,
 0x07, 0x34, 0x2B, 0x06, 0x32, 0x27, 0x06, 0x30,
 0x22, 0x05, 0x2E, 0x1E, 0x04, 0x2C, 0x1A, 0x04,
 0x2A, 0x15, 0x03, 0x28, 0x11, 0x02, 0x26, 0x0D,
 0x02, 0x24, 0x08, 0x01, 0x22, 0x04, 0x00, 0x20,
 0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x28, 0x38, 0x30, 0x18, 0x38, 0x18, 0x00, 0x30,
 0x00, 0x00, 0x20, 0x00, 0x00, 0x18, 0x00, 0x08,
 0x10, 0x08, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x10, 0x10, 0x20, 0x30, 0x18, 0x08, 0x20, 0x20,
 0x00, 0x08, 0x18, 0x00, 0x00, 0x30, 0x38, 0x00,
 0x20, 0x38, 0x00, 0x20, 0x20, 0x10, 0x18, 0x18,
 0x00, 0x10, 0x10, 0x38, 0x30, 0x00, 0x38, 0x00,
 0x00, 0x30, 0x28, 0x20, 0x28, 0x10, 0x00, 0x18,
 0x08, 0x00, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x12, 0x27, 0x0F, 0x00, 0x34, 0x14,
 0x00, 0x3F, 0x21, 0x00, 0x00, 0x00, 0x00, 0x36,
 0x36, 0x36, 0x2E, 0x2E, 0x2E, 0x26, 0x26, 0x26,
 0x1E, 0x1E, 0x1E, 0x16, 0x16, 0x16, 0x0E, 0x0E,
 0x0E, 0x05, 0x05, 0x05, 0x11, 0x04, 0x00, 0x19,
 0x11, 0x00, 0x26, 0x19, 0x08, 0x2E, 0x22, 0x11,
 0x1D, 0x2E, 0x15, 0x0C, 0x22, 0x08, 0x04, 0x19,
 0x00, 0x00, 0x11, 0x00, 0x00, 0x22, 0x3B, 0x04,
 0x2E, 0x3B, 0x37, 0x2E, 0x19, 0x19, 0x37, 0x3F,
 0x2A, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x00, 0x3A, 0x3A, 0x3A, 0x2D, 0x35,
 0x38, 0x2B, 0x2B, 0x3F, 0x1D, 0x1F, 0x23, 0x12,
 0x15, 0x13, 0x0D, 0x0D, 0x10, 0x3F, 0x3F, 0x3F,
 0x0A, 0x12, 0x2A, 0x1A, 0x0F, 0x03, 0x30, 0x1B,
 0x12, 0x37, 0x28, 0x21, 0x1F, 0x0B, 0x15, 0x1D,
 0x2C, 0x0B, 0x3A, 0x30, 0x11, 0x36, 0x0D, 0x18,
 0x00, 0x00, 0x34, 0x00, 0x00, 0x3F, 0x00, 0x00,
 0x34, 0x00, 0x00, 0x3F, 0x00, 0x18, 0x3F, 0x20,
 0x10, 0x00, 0x38, 0x38, 0x38, 0x38, 0x30, 0x28,
 0x38, 0x28, 0x18, 0x30, 0x20, 0x10, 0x30, 0x20,
 0x10, 0x00, 0x00, 0x00, 0x08, 0x08, 0x2C, 0x00,
 0x18, 0x3C, 0x00, 0x24, 0x3C, 0x10, 0x34, 0x3C,
 0x00, 0x00, 0x10, 0x0F, 0x10, 0x20, 0x18, 0x1B,
 0x27, 0x22, 0x26, 0x2E, 0x2B, 0x31, 0x35, 0x34,
 0x3F, 0x3F, 0x34, 0x38, 0x3C, 0x00, 0x08, 0x20,
 0x00, 0x18, 0x20, 0x00, 0x28, 0x20, 0x24, 0x3C,
 0x3C, 0x00, 0x34, 0x34, 0x08, 0x10, 0x24, 0x00,
 0x08, 0x18, 0x00, 0x00, 0x16, 0x00, 0x00, 0x00,
 0x00, 0x3F, 0x00, 0x04, 0x3F, 0x04, 0x08, 0x3F,
 0x08, 0x0D, 0x3F, 0x0D, 0x11, 0x3F, 0x11, 0x15,
 0x3F, 0x15, 0x19, 0x3F, 0x19, 0x1D, 0x3F, 0x1D,
 0x22, 0x3F, 0x22, 0x26, 0x3F, 0x26, 0x2A, 0x3F,
 0x2A, 0x2E, 0x3F, 0x2E, 0x32, 0x3F, 0x32, 0x37,
 0x3F, 0x37, 0x3B, 0x3F, 0x3B, 0x3F, 0x3F, 0x3F};

static u1 MidPal[] = {
 0x00, 0x00, 0x00, 0x3B, 0x22, 0x00, 0x33, 0x19,
 0x00, 0x2A, 0x11, 0x00, 0x08, 0x19, 0x33, 0x00,
 0x11, 0x2A, 0x00, 0x08, 0x22, 0x00, 0x33, 0x3B,
 0x08, 0x22, 0x3B, 0x22, 0x22, 0x22, 0x2A, 0x2A,
 0x2A, 0x3B, 0x33, 0x00, 0x3B, 0x00, 0x00, 0x22,
 0x00, 0x00, 0x3B, 0x3B, 0x3B, 0x00, 0x00, 0x00,
 0x3B, 0x0C, 0x00, 0x08, 0x2A, 0x0C, 0x08, 0x2E,
 0x0C, 0x08, 0x26, 0x0C, 0x33, 0x3B, 0x3B, 0x26,
 0x3B, 0x3B, 0x19, 0x19, 0x19, 0x08, 0x08, 0x08,
 0x33, 0x33, 0x33, 0x15, 0x37, 0x3B, 0x11, 0x11,
 0x11, 0x15, 0x00, 0x00, 0x3F, 0x19, 0x00, 0x2E,
 0x00, 0x00, 0x04, 0x2A, 0x3B, 0x3F, 0x2A, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x22, 0x37, 0x00, 0x20,
 0x33, 0x00, 0x1D, 0x2F, 0x00, 0x1B, 0x2B, 0x00,
 0x18, 0x27, 0x00, 0x16, 0x23, 0x00, 0x13, 0x1F,
 0x00, 0x11, 0x1B, 0x00, 0x0E, 0x17, 0x00, 0x0C,
 0x13, 0x00, 0x0A, 0x0F, 0x00, 0x07, 0x0B, 0x00,
 0x05, 0x08, 0x00, 0x02, 0x04, 0x01, 0x1A, 0x29,
 0x3F, 0x27, 0x3F, 0x3F, 0x27, 0x33, 0x3F, 0x1B,
 0x1B, 0x3F, 0x27, 0x1B, 0x3F, 0x33, 0x1B, 0x3F,
 0x3F, 0x1B, 0x33, 0x3F, 0x1B, 0x27, 0x3F, 0x1B,
 0x1B, 0x3F, 0x1B, 0x1B, 0x3F, 0x27, 0x1B, 0x3F,
 0x33, 0x1B, 0x3F, 0x3F, 0x1B, 0x33, 0x3F, 0x1B,
 0x27, 0x3F, 0x1B, 0x1B, 0x3F, 0x27, 0x1B, 0x3F,
 0x33, 0x1B, 0x3F, 0x3F, 0x1B, 0x3F, 0x3F, 0x1B,
 0x33, 0x3F, 0x1B, 0x27, 0x3F, 0x0F, 0x0F, 0x3F,
 0x1B, 0x0F, 0x3F, 0x27, 0x0F, 0x3F, 0x33, 0x0F,
 0x3F, 0x3F, 0x0F, 0x33, 0x3F, 0x0F, 0x27, 0x3F,
 0x0F, 0x1B, 0x3F, 0x0F, 0x0F, 0x3F, 0x0F, 0x0F,
 0x3F, 0x1B, 0x0F, 0x3F, 0x27, 0x0F, 0x3F, 0x33,
 0x0F, 0x3F, 0x3F, 0x0F, 0x33, 0x3F, 0x0F, 0x27,
 0x3F, 0x0F, 0x1B, 0x3F, 0x0F, 0x0F, 0x3F, 0x1B,
 0x0F, 0x3F, 0x27, 0x0F, 0x3F, 0x33, 0x0F, 0x3F,
 0x3F, 0x0F, 0x3F, 0x3F, 0x0F, 0x33, 0x3F, 0x0F,
 0x27, 0x3F, 0x0F, 0x1B, 0x3F, 0x03, 0x0F, 0x3F,
 0x03, 0x03, 0x3F, 0x0F, 0x03, 0x3F, 0x1B, 0x03,
 0x3F, 0x27, 0x03, 0x3F, 0x33, 0x03, 0x3F, 0x3F,
 0x03, 0x33, 0x3F, 0x03, 0x27, 0x3F, 0x03, 0x1B,
 0x3F, 0x03, 0x0F, 0x3F, 0x03, 0x03, 0x3F, 0x03,
 0x03, 0x3F, 0x0F, 0x03, 0x3F, 0x1B, 0x03, 0x3F,
 0x27, 0x03, 0x3F, 0x33, 0x03, 0x3F, 0x3F, 0x03,
 0x33, 0x3F, 0x03, 0x27, 0x3F, 0x03, 0x1B, 0x3F,
 0x03, 0x0F, 0x3F, 0x03, 0x03, 0x3F, 0x0F, 0x03,
 0x3F, 0x1B, 0x03, 0x3F, 0x27, 0x03, 0x3F, 0x33,
 0x03, 0x3F, 0x3F, 0x03, 0x3F, 0x3F, 0x03, 0x33,
 0x3F, 0x03, 0x27, 0x3F, 0x03, 0x1B, 0x33, 0x03,
 0x0F, 0x33, 0x03, 0x03, 0x33, 0x0F, 0x03, 0x33,
 0x1B, 0x03, 0x33, 0x27, 0x03, 0x33, 0x33, 0x03,
 0x0B, 0x14, 0x0A, 0x0C, 0x10, 0x08, 0x00, 0x00,
 0x00, 0x23, 0x00, 0x00, 0x14, 0x08, 0x08, 0x33,
 0x23, 0x1F, 0x00, 0x14, 0x00, 0x3F, 0x00, 0x00,
 0x3F, 0x03, 0x03, 0x3F, 0x06, 0x06, 0x3F, 0x09,
 0x09, 0x3F, 0x0C, 0x0C, 0x3F, 0x0F, 0x0F, 0x3F,
 0x12, 0x12, 0x3F, 0x15, 0x15, 0x3F, 0x18, 0x18,
 0x3F, 0x1B, 0x1B, 0x3F, 0x1E, 0x1E, 0x3F, 0x21,
 0x21, 0x3F, 0x24, 0x24, 0x3F, 0x27, 0x27, 0x3F,
 0x2A, 0x2A, 0x3F, 0x2D, 0x2D, 0x3F, 0x30, 0x30,
 0x3F, 0x33, 0x33, 0x3F, 0x36, 0x36, 0x3F, 0x39,
 0x39, 0x3F, 0x3C, 0x3C, 0x3F, 0x3F, 0x3F, 0x03,
 0x1B, 0x27, 0x03, 0x0F, 0x27, 0x03, 0x03, 0x27,
 0x0F, 0x03, 0x27, 0x1B, 0x03, 0x27, 0x27, 0x03,
 0x27, 0x27, 0x03, 0x1B, 0x1B, 0x03, 0x0F, 0x1B,
 0x03, 0x03, 0x1B, 0x0F, 0x03, 0x1B, 0x1B, 0x03,
 0x0F, 0x1B, 0x03, 0x03, 0x1B, 0x03, 0x03, 0x1B,
 0x0F, 0x03, 0x1B, 0x1B, 0x03, 0x0F, 0x1B, 0x03,
 0x03, 0x1B, 0x0F, 0x03, 0x1B, 0x1B, 0x03, 0x1B,
 0x0F, 0x03, 0x03, 0x0F, 0x0F, 0x03, 0x03, 0x0F,
 0x03, 0x03, 0x0F, 0x0F, 0x03, 0x03, 0x0F, 0x0F,
 0x03, 0x0F, 0x1B, 0x0F, 0x0F, 0x1B, 0x1B, 0x0F,
 0x0F, 0x1B, 0x0F, 0x0F, 0x1B, 0x1B, 0x0F, 0x0F,
 0x1B, 0x1B, 0x0F, 0x1B, 0x27, 0x0F, 0x0F, 0x27,
 0x1B, 0x0F, 0x27, 0x27, 0x0F, 0x1B, 0x27, 0x0F,
 0x0F, 0x27, 0x0F, 0x0F, 0x27, 0x1B, 0x0F, 0x27,
 0x27, 0x0F, 0x1B, 0x27, 0x0F, 0x0F, 0x27, 0x1B,
 0x0F, 0x27, 0x27, 0x0F, 0x27, 0x27, 0x0F, 0x1B,
 0x33, 0x0F, 0x0F, 0x33, 0x1B, 0x0F, 0x33, 0x27,
 0x0F, 0x33, 0x33, 0x0F, 0x27, 0x33, 0x0F, 0x1B,
 0x33, 0x0F, 0x0F, 0x33, 0x0F, 0x0F, 0x33, 0x1B,
 0x0F, 0x33, 0x27, 0x0F, 0x33, 0x33, 0x0F, 0x27,
 0x33, 0x0F, 0x1B, 0x33, 0x0F, 0x0F, 0x33, 0x1B,
 0x0F, 0x33, 0x27, 0x0F, 0x33, 0x33, 0x0F, 0x33,
 0x33, 0x0F, 0x27, 0x33, 0x0F, 0x1B, 0x33, 0x1B,
 0x1B, 0x33, 0x27, 0x1B, 0x33, 0x33, 0x1B, 0x27,
 0x33, 0x1B, 0x1B, 0x33, 0x1B, 0x1B, 0x33, 0x27,
 0x1B, 0x33, 0x33, 0x1B, 0x27, 0x33, 0x1B, 0x1B,
 0x33, 0x27, 0x1B, 0x33, 0x33, 0x1B, 0x33, 0x33,
 0x1B, 0x27, 0x33, 0x27, 0x27, 0x33, 0x33, 0x27,
 0x27, 0x33, 0x27, 0x27, 0x33, 0x33, 0x27, 0x27,
 0x33, 0x33, 0x27, 0x33, 0x27, 0x1B, 0x1B, 0x27,
 0x27, 0x1B, 0x1B, 0x27, 0x1B, 0x1B, 0x27, 0x27,
 0x1B, 0x1B, 0x27, 0x27, 0x1B, 0x27, 0x03, 0x03,
 0x03, 0x0F, 0x0F, 0x0F, 0x1B, 0x1B, 0x1B, 0x27,
 0x27, 0x27, 0x33, 0x33, 0x33, 0x3F, 0x3F, 0x3F,
 0x3F, 0x16, 0x03, 0x27, 0x07, 0x05, 0x24, 0x24,
 0x3F, 0x00, 0x00, 0x00, 0x16, 0x16, 0x16, 0x26,
 0x26, 0x26, 0x34, 0x34, 0x34, 0x3F, 0x00, 0x00};

static u1 IntroPal[] = {
 0x00, 0x00, 0x00, 0x0E, 0x1E, 0x34, 0x0E, 0x1A,
 0x2C, 0x22, 0x11, 0x12, 0x13, 0x23, 0x33, 0x00,
 0x30, 0x38, 0x08, 0x20, 0x38, 0x08, 0x28, 0x0C,
 0x08, 0x18, 0x30, 0x08, 0x24, 0x0C, 0x00, 0x10,
 0x28, 0x38, 0x38, 0x38, 0x14, 0x34, 0x38, 0x30,
 0x38, 0x38, 0x24, 0x38, 0x38, 0x3A, 0x11, 0x05,
 0x09, 0x06, 0x03, 0x30, 0x17, 0x1D, 0x10, 0x10,
 0x10, 0x30, 0x18, 0x00, 0x04, 0x28, 0x38, 0x38,
 0x20, 0x00, 0x10, 0x06, 0x03, 0x28, 0x10, 0x00,
 0x18, 0x18, 0x18, 0x1C, 0x07, 0x03, 0x15, 0x07,
 0x03, 0x3C, 0x1A, 0x08, 0x28, 0x28, 0x28, 0x25,
 0x08, 0x03, 0x3F, 0x22, 0x0C, 0x3F, 0x28, 0x0F,
 0x20, 0x00, 0x00, 0x3F, 0x32, 0x13, 0x32, 0x10,
 0x04, 0x3F, 0x38, 0x16, 0x2C, 0x0E, 0x04, 0x38,
 0x15, 0x0E, 0x12, 0x2E, 0x34, 0x05, 0x2F, 0x37,
 0x16, 0x0C, 0x04, 0x04, 0x29, 0x2F, 0x19, 0x2B,
 0x30, 0x32, 0x1C, 0x19, 0x07, 0x18, 0x1B, 0x37,
 0x27, 0x25, 0x38, 0x34, 0x33, 0x2F, 0x1F, 0x1E,
 0x30, 0x35, 0x34, 0x1E, 0x0E, 0x05, 0x07, 0x1B,
 0x1F, 0x08, 0x14, 0x16, 0x29, 0x22, 0x24, 0x36,
 0x1E, 0x09, 0x35, 0x1A, 0x15, 0x11, 0x22, 0x26,
 0x09, 0x2A, 0x31, 0x1A, 0x0E, 0x0E, 0x0E, 0x29,
 0x30, 0x09, 0x10, 0x13, 0x15, 0x13, 0x14, 0x2B,
 0x32, 0x32, 0x36, 0x2C, 0x29, 0x15, 0x1D, 0x20,
 0x32, 0x31, 0x30, 0x27, 0x34, 0x34, 0x10, 0x09,
 0x07, 0x23, 0x15, 0x15, 0x06, 0x20, 0x25, 0x0A,
 0x16, 0x26, 0x05, 0x25, 0x2A, 0x36, 0x23, 0x1E,
 0x1C, 0x0A, 0x08, 0x2C, 0x16, 0x08, 0x22, 0x27,
 0x2B, 0x1E, 0x2F, 0x31, 0x27, 0x16, 0x07, 0x30,
 0x28, 0x24, 0x11, 0x18, 0x18, 0x35, 0x20, 0x1A,
 0x0F, 0x26, 0x2C, 0x2B, 0x1B, 0x0A, 0x20, 0x16,
 0x09, 0x17, 0x21, 0x26, 0x21, 0x18, 0x19, 0x1A,
 0x1D, 0x1F, 0x37, 0x2A, 0x1F, 0x2C, 0x2F, 0x2E,
 0x16, 0x25, 0x2B, 0x38, 0x23, 0x0F, 0x1A, 0x31,
 0x34, 0x27, 0x0F, 0x05, 0x1D, 0x13, 0x13, 0x31,
 0x1D, 0x0A, 0x38, 0x25, 0x19, 0x21, 0x26, 0x26,
 0x36, 0x30, 0x2D, 0x19, 0x10, 0x06, 0x25, 0x10,
 0x0E, 0x0C, 0x0E, 0x0D, 0x12, 0x17, 0x20, 0x25,
 0x1C, 0x0B, 0x38, 0x36, 0x1F, 0x31, 0x32, 0x24,
 0x39, 0x1E, 0x12, 0x09, 0x26, 0x2D, 0x0D, 0x18,
 0x1C, 0x22, 0x2E, 0x2E, 0x1E, 0x20, 0x23, 0x31,
 0x25, 0x10, 0x31, 0x2B, 0x11, 0x2B, 0x19, 0x17,
 0x39, 0x32, 0x1C, 0x2B, 0x22, 0x0D, 0x24, 0x21,
 0x20, 0x10, 0x13, 0x1D, 0x3B, 0x2A, 0x18, 0x15,
 0x0B, 0x09, 0x1F, 0x1F, 0x2D, 0x2C, 0x33, 0x2A,
 0x38, 0x2A, 0x10, 0x1A, 0x26, 0x28, 0x28, 0x1B,
 0x26, 0x36, 0x30, 0x13, 0x39, 0x16, 0x06, 0x19,
 0x1D, 0x31, 0x22, 0x18, 0x23, 0x09, 0x12, 0x1D,
 0x0B, 0x14, 0x0A, 0x0C, 0x10, 0x08, 0x00, 0x00,
 0x00, 0x23, 0x00, 0x00, 0x14, 0x08, 0x08, 0x33,
 0x23, 0x1F, 0x00, 0x14, 0x00, 0x3F, 0x00, 0x00,
 0x3F, 0x03, 0x03, 0x3F, 0x06, 0x06, 0x3F, 0x09,
 0x09, 0x3F, 0x0C, 0x0C, 0x3F, 0x0F, 0x0F, 0x3F,
 0x12, 0x12, 0x3F, 0x15, 0x15, 0x3F, 0x18, 0x18,
 0x3F, 0x1B, 0x1B, 0x3F, 0x1E, 0x1E, 0x3F, 0x21,
 0x21, 0x3F, 0x24, 0x24, 0x3F, 0x27, 0x27, 0x3F,
 0x2A, 0x2A, 0x3F, 0x2D, 0x2D, 0x3F, 0x30, 0x30,
 0x3F, 0x33, 0x33, 0x3F, 0x36, 0x36, 0x3F, 0x39,
 0x39, 0x3F, 0x3C, 0x3C, 0x3F, 0x3F, 0x3F, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};

static u1 GamesPal[] = {
 0x08, 0x10, 0x10, 0x38, 0x28, 0x10, 0x00, 0x18,
 0x38, 0x18, 0x28, 0x38, 0x00, 0x18, 0x00, 0x00,
 0x20, 0x00, 0x38, 0x00, 0x00, 0x20, 0x00, 0x00,
 0x38, 0x38, 0x38, 0x28, 0x10, 0x00, 0x18, 0x20,
 0x28, 0x10, 0x18, 0x20, 0x08, 0x10, 0x1C, 0x38,
 0x20, 0x08, 0x30, 0x18, 0x00, 0x00, 0x00, 0x00,
 0x18, 0x20, 0x18, 0x38, 0x20, 0x00, 0x30, 0x18,
 0x00, 0x28, 0x10, 0x00, 0x08, 0x18, 0x30, 0x00,
 0x10, 0x28, 0x00, 0x08, 0x20, 0x00, 0x30, 0x38,
 0x08, 0x20, 0x38, 0x20, 0x20, 0x20, 0x28, 0x28,
 0x28, 0x38, 0x30, 0x00, 0x38, 0x00, 0x00, 0x20,
 0x00, 0x00, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x18, 0x20, 0x18, 0x38, 0x20, 0x00, 0x30, 0x18,
 0x00, 0x28, 0x10, 0x00, 0x08, 0x18, 0x30, 0x00,
 0x10, 0x28, 0x00, 0x08, 0x20, 0x00, 0x30, 0x38,
 0x08, 0x20, 0x3C, 0x19, 0x19, 0x19, 0x28, 0x28,
 0x28, 0x38, 0x30, 0x00, 0x38, 0x00, 0x00, 0x20,
 0x00, 0x00, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x3F, 0x3F, 0x3F, 0x3B, 0x3B, 0x3B, 0x37, 0x37,
 0x37, 0x32, 0x32, 0x32, 0x2E, 0x2E, 0x2E, 0x2A,
 0x2A, 0x2A, 0x26, 0x26, 0x26, 0x22, 0x22, 0x22,
 0x1D, 0x1D, 0x1D, 0x19, 0x19, 0x19, 0x15, 0x15,
 0x15, 0x11, 0x11, 0x11, 0x0D, 0x0D, 0x0D, 0x08,
 0x08, 0x08, 0x04, 0x04, 0x04, 0x00, 0x00, 0x00,
 0x20, 0x20, 0x18, 0x3F, 0x00, 0x3F, 0x2D, 0x00,
 0x2D, 0x24, 0x00, 0x24, 0x00, 0x30, 0x38, 0x00,
 0x20, 0x38, 0x18, 0x18, 0x10, 0x3C, 0x00, 0x3C,
 0x3C, 0x00, 0x3C, 0x38, 0x30, 0x38, 0x38, 0x00,
 0x00, 0x38, 0x20, 0x00, 0x38, 0x18, 0x00, 0x28,
 0x10, 0x00, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x3F, 0x20, 0x20, 0x3F, 0x00, 0x00, 0x39, 0x00,
 0x00, 0x33, 0x00, 0x00, 0x2D, 0x00, 0x00, 0x26,
 0x00, 0x00, 0x20, 0x00, 0x00, 0x1A, 0x00, 0x00,
 0x14, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x38, 0x00,
 0x00, 0x30, 0x00, 0x00, 0x29, 0x00, 0x00, 0x22,
 0x00, 0x00, 0x1A, 0x00, 0x00, 0x13, 0x00, 0x00,
 0x3F, 0x14, 0x14, 0x39, 0x36, 0x0F, 0x36, 0x2F,
 0x07, 0x34, 0x2B, 0x06, 0x32, 0x27, 0x06, 0x30,
 0x22, 0x05, 0x2E, 0x1E, 0x04, 0x2C, 0x1A, 0x04,
 0x2A, 0x15, 0x03, 0x28, 0x11, 0x02, 0x26, 0x0D,
 0x02, 0x24, 0x08, 0x01, 0x22, 0x04, 0x00, 0x20,
 0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x28, 0x38, 0x30, 0x18, 0x38, 0x18, 0x00, 0x30,
 0x00, 0x00, 0x20, 0x00, 0x00, 0x18, 0x00, 0x08,
 0x10, 0x08, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x18, 0x20, 0x18, 0x30, 0x00, 0x00, 0x38, 0x0C,
 0x0C, 0x38, 0x18, 0x10, 0x38, 0x28, 0x00, 0x20,
 0x00, 0x00, 0x00, 0x08, 0x10, 0x00, 0x10, 0x18,
 0x00, 0x10, 0x10, 0x00, 0x18, 0x18, 0x00, 0x20,
 0x20, 0x18, 0x18, 0x18, 0x28, 0x28, 0x28, 0x30,
 0x30, 0x30, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00,
 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00,
 0x00, 0x3C, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x3C,
 0x00, 0x00, 0x10, 0x0F, 0x10, 0x20, 0x18, 0x1B,
 0x27, 0x22, 0x26, 0x2E, 0x2B, 0x31, 0x35, 0x34,
 0x3F, 0x3F, 0x34, 0x38, 0x3C, 0x00, 0x08, 0x20,
 0x00, 0x18, 0x20, 0x00, 0x28, 0x20, 0x24, 0x3C,
 0x3C, 0x00, 0x34, 0x34, 0x08, 0x10, 0x24, 0x00,
 0x08, 0x18, 0x00, 0x00, 0x16, 0x00, 0x00, 0x00,
 0x00, 0x3F, 0x00, 0x04, 0x3F, 0x04, 0x08, 0x3F,
 0x08, 0x0D, 0x3F, 0x0D, 0x11, 0x3F, 0x11, 0x15,
 0x3F, 0x15, 0x19, 0x3F, 0x19, 0x1D, 0x3F, 0x1D,
 0x22, 0x3F, 0x22, 0x26, 0x3F, 0x26, 0x2A, 0x3F,
 0x2A, 0x2E, 0x3F, 0x2E, 0x32, 0x3F, 0x32, 0x37,
 0x3F, 0x37, 0x3B, 0x3F, 0x3B, 0x3F, 0x3F, 0x3F};


typedef struct { // Total: 24 bytes
  u1 A; //always 1?
  u1 B; //seen 0, 5...
  u1 C; //seen 0, 5...
  u1 D; //always 0xFE?
} __attribute__ ((packed)) header;


//159,109: 3,0xC,1,2,3,6,0xC,0xD

//game executable starts at address 0x7BE10
//tiles are loaded at 0x140000
//each tile is 32x16 8bit image


#define TW 32
#define TH 16
#define TL (TW*TH)
#define NTILES 256
#define TS (0x140000 + TL*512)

#define PAL GrassPal


static void setpal(pic *P, u1 *Pal) {
  int I;
  times (I, 256) {
    P->P[I*4+0] = Pal[I*3+0]<<2;
    P->P[I*4+1] = Pal[I*3+1]<<2;
    P->P[I*4+2] = Pal[I*3+2]<<2;
    P->P[I*4+3] = Pal[I*3+3]<<2;
  }
}

static void whizzDecompile(char *Output, char *Input) {
  int I, J, K, X, Y, C;
  char Tmp[1024], Name[16];
  pic *P;
  int L = fileSize(Input);
  u1 *M = readFile(0, L, Input);
  u1 *Q;

#if 1
  Q = M+TS;
  P = picNew(TW,TH,8);
  setpal(P, PAL);
  times (I, NTILES) {
    memcpy(P->D, Q+I*TL, TL);
    sprintf(Tmp, "%s/tiles/%04d.png", Output, I);
    pngSave(Tmp, P);
  }
#endif

  Q = M + 0x00000+274 + 320*432;
  P = picNew(320,811,8);
  setpal(P, PAL);
  memcpy(P->D, Q, P->W*P->H);
  sprintf(Tmp, "%s/sprites01.png", Output, I);
  pngSave(Tmp, P);

  Q = M + TS + NTILES*TL;
  P = picNew(320,2000,8);
  setpal(P, PAL);
  memcpy(P->D, Q, P->W*P->H);
  sprintf(Tmp, "%s/sprites02.png", Output, 2);
  pngSave(Tmp, P);

}


int whizzInit(format *F) {
  F->Type = FMT_ARCHIVE;
  F->Name = "whizz";
  F->Description = "Whizz tiles and sprites (use on DOSBox memory dumps)";
  F->Decompile = whizzDecompile;
  return 1;
}

